{% extends "base.html" %}

{% block title %}Todos os usuários{% endblock %}

{% block content %}
<h2 class="mb-4">Todos os usuários</h2>
<ul class="list-group">
    {% for user_item in users %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                <strong>{{ user_item.username }}</strong>
                <div class="text-muted small">
                    {{ user_item.followers.count }} Seguidores • {{ user_item.following.count }} Seguindo
                </div>
            </div>

            {% if user_item != request.user %}
                <form method="post" action="{% url 'follow-toggle' user_item.id %}">
                    {% csrf_token %}
                    {% if user_item in request.user.following.all %}
                        <button type="submit" class="btn btn-sm btn-outline-danger">Deixar de seguir</button>
                    {% else %}
                        <button type="submit" class="btn btn-sm btn-outline-primary">Seguir</button>
                    {% endif %}
                </form>
            {% endif %}
        </li>
    {% endfor %}
</ul>
{% endblock %}
